{% extends 'base.html' %}
{% load static %}
{% block title %}Home | Django Store{% endblock %}

{% block content %}

<div class="p-5 mb-4 bg-light rounded-3 border shadow-sm">
    <div class="container-fluid py-3">
        <h1 class="display-5 fw-bold text-primary">Welcome to Django Store</h1>
        <p class="col-md-8 fs-4 text-muted">A high-performance shopping experience.</p>
    </div>
</div>

<div class="card shadow-sm mb-4 p-3 sticky-top" style="top: 70px; z-index: 900;">
    <div class="row g-2">
        <div class="col-md-5">
            <div class="input-group">
                <span class="input-group-text bg-white"><i class="fas fa-search"></i></span>
                <input type="text" class="form-control" id="search-input" placeholder="Search products..." onkeyup="App.applyFilters()">
            </div>
        </div>

        <div class="col-md-3">
            <select class="form-select" id="category-select" onchange="App.applyFilters()">
                <option value="">Loading Categories...</option>
            </select>
        </div>

        <div class="col-md-3">
            <select class="form-select" id="sort-select" onchange="App.applyFilters()">
                <option value="">Sort By: Newest</option>
                <option value="price">Price: Low to High</option>
                <option value="-price">Price: High to Low</option>
                <option value="name">Name: A-Z</option>
            </select>
        </div>

        <div class="col-md-1">
            <button class="btn btn-outline-secondary w-100" title="Reset Filters" onclick="App.resetFilters()">
                <i class="fas fa-redo"></i>
            </button>
        </div>
    </div>
</div>

<div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4" id="product-list">
    </div>

{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Initialize App
        App.loadCategories(); // Load the dropdown
        App.fetchProducts();  // Load the products
    });
</script>
{% endblock %}